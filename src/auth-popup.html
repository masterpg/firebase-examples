<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>FirebaseUI Auth Demo</title>
  <script src="https://www.gstatic.com/firebasejs/live/4.1/firebase.js"></script>
  <script src="../firebase-config.js"></script>
  <script src="../firebaseui/firebaseui__ja.js"></script>
  <link type="text/css" rel="stylesheet" href="../firebaseui/firebaseui.css" />
  <link type="text/css" rel="stylesheet" href="../firebaseui/firebaseui-custom.css" />
  <style>
    body {
      margin: 0;
    }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script type="text/javascript">
    const recaptcha = location.search.indexOf('recaptcha=invisible') !== -1 ? 'invisible' : 'normal';
    // FirebaseUI config.
    const uiConfig = {
      // サインインが成功した後に指定したURLにリダイレクトする
      'signInSuccessUrl': '/',
      'callbacks': {
        'signInSuccess': function(user, credential, redirectUrl) {
          if (window.opener) {
            // ウィジェットがポップアップで開かれているので、
            // window.openerにリダイレクトさせないためにウィンドウを閉じてfalseを返す
            window.close();
            return false;
          } else {
            // ウィジェットはリダイレクトモードなので`signInSuccessUrl`へリダイレクトさせる
            return true;
          }
        }
      },
      'signInOptions': [
        // TODO(developer): Remove the providers you don't need for your app.
        firebase.auth.GoogleAuthProvider.PROVIDER_ID,
        firebase.auth.FacebookAuthProvider.PROVIDER_ID,
        firebase.auth.TwitterAuthProvider.PROVIDER_ID,
        firebase.auth.GithubAuthProvider.PROVIDER_ID,
        firebase.auth.EmailAuthProvider.PROVIDER_ID,
        {
          provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,
          recaptchaParameters: {
            size: recaptcha,
          }
        }
      ],
      // Terms of service url.
      'tosUrl': 'https://www.google.com'
    };

    // FirebaseUIをFirebaseで初期化する
    const authUI = new firebaseui.auth.AuthUI(firebase.auth());
    // startメソッドは、指定されたidの要素内にFirebaseUIサインインウィジェットを
    // 含めるために、DOMがロードされるまで待機します
    authUI.start('#firebaseuiContainer', uiConfig);
  </script>
</head>

<body>
<div id="firebaseuiContainer"></div>
</body>

</html>
